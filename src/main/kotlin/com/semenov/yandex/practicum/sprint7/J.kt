package com.semenov.yandex.practicum.sprint7

fun main() {
    val n = readln().toInt()
    val ratings = readln().split(" ").map { it.toInt() }.toIntArray()

    val (length, indices) = findLIS(ratings)
    println(length)
    println(indices.joinToString(" "))
}


fun findLIS(ratings: IntArray): Pair<Int, List<Int>> {
    val n = ratings.size
    if (n == 0) return Pair(0, emptyList())

    val dp = IntArray(n) { 1 } // Длина LCS для каждого элемента
    val prev = IntArray(n) { -1 } // Для восстановления последовательности

    var maxLength = 1
    var maxIndex = 0

    for (i in 0 until n) {
        for (j in 0 until i) {
            if (ratings[j] < ratings[i]) {
                if (dp[j] + 1 > dp[i]) {
                    dp[i] = dp[j] + 1
                    prev[i] = j
                }
            }
        }
        if (dp[i] > maxLength) {
            maxLength = dp[i]
            maxIndex = i
        }
    }

    // Восстановление последовательности
    val indices = mutableListOf<Int>()
    while (maxIndex != -1) {
        indices.add(maxIndex + 1)
        maxIndex = prev[maxIndex]
    }
    indices.reverse() // Обратим порядок, чтобы получить правильную последовательность

    return Pair(maxLength, indices)
}

/**
 * J. Путешествие
Все языки	Python 3.11.4
Ограничение времени	0.5 секунд	2.5 секунд
Ограничение памяти	64Mb	64Mb
Ввод	стандартный ввод или input.txt
Вывод	стандартный вывод или output.txt
Гоша решил отправиться в турне по островам Алгосского архипелага.
Туристическая программа состоит из последовательного посещения n достопримечательностей.
У i-й достопримечательности есть свой рейтинг ri.

Впечатление от i-й достопримечательности равно её рейтингу ri.
Гоша хочет, чтобы его впечатление от каждой новой посещённой достопримечательности было сильнее, чем от предыдущей.
Ради этого он даже готов пропустить некоторые места в маршруте –— в случае,
если они нарушают этот порядок плавного возрастания.

Помогите Гоше и найдите наибольшую возрастающую подпоследовательность в массиве рейтингов ri.

Формат ввода
В первой строке дано натуральное число n (1 ≤ n ≤ 3 ⋅ 103) –— сколько различных туристических мест есть в программе.
Во второй строке дано n натуральных чисел через пробел –— рейтинги этих достопримечательностей ri (1 ≤ ri ≤ 109).

Формат вывода
Сначала в отдельной строке выведите длину найденной подпоследовательности.
В следующей строке выведите номера достопримечательностей, которые образуют эту подпоследовательность.

Пример 1
Ввод
5
4 2 9 1 13
3

Вывод
1 3 5

Пример 2
Ввод
6
1 2 4 8 16 32
6

Вывод
1 2 3 4 5 6

 */